
{% extends 'base.html.twig' %}



{% include 'sample/headerTitle.html'%}

<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<script
  src="https://code.jquery.com/jquery-3.3.1.js"
  integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
  crossorigin="anonymous">
</script>





	   <div class="example-wrapper">
Username: <input type="text" id="un"/><br>
Password: <input type="text" id="pw"/><br>
<form>
	<div class="ui-field-contain">
    	<label for="select-native-1">Basic:</label>
    		<select name="select-native-1" id="accTypeSelect">
        		<option value="Customer">Customer</option>
        		<option value="Manager">Manager</option>
        		<option value="Driver">Driver</option>
    	</select>
	</div>
</form>

     <button onclick="postData()">Post data!</button>
        
     <button onclick="check()">Check if user exists</button>

	


        <script>                                         //Register the user
        function postData(){

        // getting the values from the fields        
        var username = $('#un').val();
        var password = $('#pw').val();
		var accType = $('#accTypeSelect').val()
        
        // validation
        if(username == ""){
           alert("please enter a username");
        } else {
        
        
            console.log(username);
            console.log(password);
			console.log(accType);
				
            
            $.post( "/catchTheData", { type: "registeruser", un: username, pw: password, accT: accType})
                  .done(function( data ) {
                    alert( "Data Loaded: " + data );
                  });
                  
       }        

       }        
       
	      
	   
	   
	   
        function check(){											//Login the user

        // getting the values from the fields        
        var username = $('#un').val();
		var password = $('#pw').val();
		
         // passing it to the catchTheData page for verification  
        $.post( "/catchTheData", { type: "loginuser", un: username, pw: password, })
              .done(function( data ) { //Any data that is returened from the /catchTheData in the backend is stored in the 'data' variable
                alert( "Data Loaded: " + data );
				  // based on the user acc type
                 // send the user to that dash board
                if(data == 'Customer'){
                   window.location="/register#customerpage"
                }
                else if(data == 'Manager')
                {
                    window.location="register#manager"
                }
			      else if(data == 'Driver')
                {
                    window.location="/login#driver"
                }
              });
       }        
        </script>
		

     
    
</div>


